(()=>{"use strict";var e={855:(e,n,t)=>{const r=require("child_process"),i=require("https");var o=t.n(i);const a=require("fs");var s=t.n(a);const c=require("path");var p=t.n(c);const l=JSON.parse("{\"ApiManager\":\"import{instance as axios}from'./instance';\\n\\nimport*as services from'./services'\\n\\n;export class ApiManager{static interceptors={request:[],response:[],error:[],};\\n\\n{servicesFields}\\n\\nconstructor(){if(!ApiManager.instance){ApiManager.instance=this}return ApiManager.instance}\\n\\n{servicesGetters}\\n\\nproxyService(apiService){const proxyHandler={get:(target,key)=>{if(target[key]!==null){if(typeof target[key]==='function'){return async(...payload)=>{await this.onRequest();try{const responseData=await target[key](...payload);await this.onResponse();return responseData}catch(error){throw await this.onError(error);}}}else if(typeof target[key]==='object'){return this.proxyService(target[key])}}else{throw`Incorrect field type:${key}`}},};return new Proxy(apiService,proxyHandler)}async onRequest(){return await Promise.all(ApiManager.interceptors.request)}async onResponse(){return await Promise.all(ApiManager.interceptors.response)}async onError(error){await Promise.all(ApiManager.interceptors.error);return error}logout(){axios.defaults.headers.Authorization=''}}\",\"instance\":\"import axios from'axios'\\n\\n;const getAccessToken=()=>{return localStorage.getItem('EXAMPLE_NAME')};const accessToken=getAccessToken();export const instance=axios.create({baseURL:process.env.API_URL,headers:{Accept:'application/json',...(accessToken?{Authorization:`Bearer ${accessToken}`}:{}),},});\\n\"}"),u=["abstract","arguments","await","boolean","break","byte","case","catch","char","class","const","continue","debugger","default","delete","do","double","else","enum","eval","export","extends","false","final","finally","float","for","function","goto","if","implements","import","in","instanceof","int","interface","let","long","native","new","null","package","private","protected","public","return","short","static","super","switch","synchronized","this","throw","throws","transient","true","try","typeof","var","void","volatile","while","with","yield"],d=t(521),f=()=>d.createInterface({input:process.stdin,output:process.stdout}),y=async e=>{const n=f();return await new Promise((t=>n.question(e,(e=>{t(e),n.close()}))))};(async()=>{const e=await(async()=>{const e=f(),n=await new Promise((n=>e.question("Put your postman documentation link: ",(t=>{n(t),e.close()}))));return`/api/collections/${new URL(n).pathname.split("/").slice(-2).join("/")}?segregateAuth=true&versionTag=latest`})().catch((()=>null));if(await y("Choose a destination directory (default: ./api): ").then((e=>e||"./api")).catch((()=>"./api")),!e)throw new Error("Incorrect URL");const n={hostname:"documenter.gw.postman.com",port:443,path:e,method:"GET"};function t(e){if(e.item)return e.item.reduce(((e,n)=>{var r;return e[(e=>[/\//g,/\\/g].reduce(((e,n)=>e.replace(n,"")),e))((r=n.name,r.split(" ").map(((e,n)=>e.charAt(0)[0===n?"toLowerCase":"toUpperCase"]()+e.slice(1))).join("")))]=t(n),e}),{});if(e.request){const{method:n,urlObject:t,body:r}=e.request;if(n&&t&&t.path&&t.path.length){const e=n.toLowerCase(),i=`const endpoint = '${t.path.join("/")}'; const response = await axios.${e}(\`\${apiPath}/\${endpoint}\`, {{body}}); return response.data;`;let o=`{fnName}: async () => {${i.replace("{body}","")}}\n`;if(r?.formdata){const e=[...r.formdata].sort(((e,n)=>Number(/required/.test(n.description))-Number(/required/.test(e.description)))),n=[],t=/\[(.*)\]/g;let a="",s="",c="";for(let r=0;r<e.length;r++){let{key:i,description:o}=e[r],p=!1;if(n.some((e=>e.includes(i))))return;if(t.test(i)){if(i=i.replace(t,""),n.includes(i))continue;n.push(i),o=(/required/.test(o)?"required":"")+" in:"}u.includes(i)&&(p=!0,i=`_${i}`),s+=`${p?`${i.replace(/^_/,"")} : ${i}`:i},`,c+=`${i} ${/required/.test(o)?"":" = undefined"},`,/\W(int|float)\W/.test(o)?a+=`\n* @param {number} ${i}`:/\Wstring\W/.test(o)?a+=`\n* @param {string} ${i}`:/\Win:\W/.test(o)?a+=`\n* @param {any[]} ${i}`:a+=`\n* @param {any} ${i}`,0===r&&(a=a.replace(/\n/,""))}o=`/**\n${a}\n*/\n '{fnName}': async (${c}) => {${i.replace("{body}",s)}}\n`}else if(t.query&&t.query.length){const e=t.query;let n="",r="",a="";for(let t=0;t<e.length;t++){let{key:i}=e[t],o=!1;u.includes(i)&&(o=!0,i=`_${i}`),n+=`\n* @param {any} ${i}`,r+=`${o?`${i.replace(/^_/,"")} : ${i}`:i},`,a+=`${i} = undefined,`,0===t&&(n=n.replace(/\n/,""))}o=`/**\n${n}\n*/\n '{fnName}': async (${a}) => {${i.replace("{body}",`params: {${r}}`)}}\n`}return o}}}async function i(e){const n=t(e);if(s().readdirSync(__dirname).find((e=>"api"===e))){const n=await y("WARNING: ./api directory will be removed. Are you sure you want to continue? (y/n): ");if("y"!==n&&"yes"!==n){if("n"===n||"no"===n)throw new Error("Canceled");return i(e)}s().rmSync(p().join(__dirname,"./api"),{recursive:!0})}return s().mkdirSync(p().join(__dirname,"./api")),s().readdirSync(p().join(__dirname,"./api")).find((e=>"services"===e))||s().mkdirSync(p().join(__dirname,"./api/services")),function(e,n=__dirname){const t=JSON.parse(JSON.stringify(e)),r=(e,n,t)=>{let i="";"object"==typeof n?i=Object.entries(n).reduce(((e,[n,i])=>{if("string"==typeof i)e+=i.replace("{fnName}",n)+",\n";else if("object"==typeof i){const e=p().join(t,n);s().mkdirSync(e),r(n,i,e)}return e}),""):"string"==typeof n&&(i=n),s().writeFileSync(`${t}/index.js`,((e,n)=>`/**{importsRow}*/\n\n export const ${e} = (apiPath = '') => ({/**{servicesRow}*/\n\n${n}\n});\n`)(e,i))};Object.entries(t).forEach((([e,i])=>{const o=p().join(n,e);s().mkdirSync(o),"object"==typeof i&&(r(e,i,o),delete t[e])}));const i=Object.entries(t);i.length&&(i.forEach((([e])=>{s().rmdirSync(p().join(n,e))})),r("rootRequests",{rootRequests:{...t}},n))}(n,p().join(__dirname,"./api/services")),n}function a(e,n=__dirname){return e.reduce(((e,t)=>{if(t.isDirectory()){const r=p().join(n,t.name),i=function(e){const n=s().readdirSync(e,{withFileTypes:!0});return 1===n.length&&n[0].isFile()}(r);return{...e,[t.name]:{containSubServices:!i,...i?{}:a(s().readdirSync(r,{withFileTypes:!0}),r)}}}return e}),{})}function c(e){return Object.entries(e).reduce(((e,[n,t])=>t.containSubServices?{...e,[n]:{items:Object.entries(t).filter((([e])=>"containSubServices"!==e)).map((([e,n])=>n.containSubServices?c({[e]:n}):{[e]:null}))}}:e),{})}function d(e,n=__dirname){Object.entries(e).forEach((([e,t])=>{const r=p().join(n,e),i=p().join(r,"index.js"),o=s().readFileSync(i,{encoding:"utf8"});let a="import { instance as axios } from '@/api/instance';\n\n",c="";for(let e=0;e<t.items.length;e++){const n=t.items[e],[i]=Object.entries(n),[o,s]=i,p=`${o}Service`;a+=`import {${o} as ${p}} from './${o}';`,c+=`${o}: ${p}(),`,s&&d(n,r)}const l=o.replace("/**{importsRow}*/",a).replace("/**{servicesRow}*/",c);s().writeFileSync(i,l,{encoding:"utf8"})}))}function m(e,n=__dirname){return[...e.filter((e=>e.isFile())).map((e=>p().join(n,e.name))),...e.filter((e=>e.isDirectory())).flatMap((e=>m(s().readdirSync(p().join(n,e.name),{withFileTypes:!0}),p().join(n,e.name))))]}o().request(n,(e=>{console.log("Fetching data from server...");let n="";e.on("data",(e=>{n+=e})),e.on("end",(async()=>{console.log("Data loaded!");const e=JSON.parse(n);console.log("Handling data...");try{await i(e),function(){const e=s().readdirSync(p().join(__dirname,"./api/services")).filter((e=>!/\.(js)$/.test(e)));!function(e){let n="",t="";for(let r=0;r<e.length;r++){const i=e[r];n+=`import {${i}} from './${i}';`,t+=`${i},`}const r=`${n}\n\nexport {${t}};\n`;s().writeFileSync(p().join(__dirname,"./api/services/index.js"),r)}(e);let n="",t="";for(let r=0;r<e.length;r++){const i=e[r],o=`#${i}Service`;n+=`${o} = this.proxyService(services.${i}());`,t+=`/**\n* @returns {ReturnType<services.${i}>}\n*/\nget ${i} () { return this.${o} }`}Object.entries(l).forEach((([e,r])=>{"ApiManager"===e&&(r=(r=r.replace("{servicesFields}",n)).replace("{servicesGetters}",t)),s().writeFileSync(p().join(__dirname,`./api/${e}.js`),r)}))}(),function(){const e=p().join(__dirname,"./api/services");d(c(a(s().readdirSync(e,{withFileTypes:!0}),e)),e),m(s().readdirSync(e,{withFileTypes:!0}),e).forEach((e=>{const n=s().readFileSync(e,{encoding:"utf8"}).replace("/**{importsRow}*/","import { instance as axios } from '@/api/instance';\n\n").replace("/**{servicesRow}*/","");s().writeFileSync(e,n,{encoding:"utf8"})}))}(),console.log("API template generated!"),console.log("Formatting..."),(0,r.exec)('npx prettier --write "./**/api/**/*.js"'),console.log("Done!")}catch(e){console.error(e)}}))})).end()})()},521:e=>{e.exports=require("readline")}},n={};function t(r){var i=n[r];if(void 0!==i)return i.exports;var o=n[r]={exports:{}};return e[r](o,o.exports,t),o.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t(855)})();