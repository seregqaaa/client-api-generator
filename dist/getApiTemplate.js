(()=>{"use strict";var e={855:(e,n,t)=>{const r=require("child_process"),i=require("https");var o=t.n(i);const s=require("fs");var a=t.n(s);const c=require("path");var l=t.n(c);const p=JSON.parse("{\"ApiManager\":\"import{instance as axios}from'./instance';\\n\\nimport*as services from'./services'\\n\\n;export class ApiManager{static interceptors={request:[],response:[],error:[],};\\n\\n{servicesFields}\\n\\nconstructor(){if(!ApiManager.instance){ApiManager.instance=this}return ApiManager.instance}\\n\\n{servicesGetters}\\n\\nproxyService(apiService){const proxyHandler={get:(target,key)=>{if(target[key]!==null){if(typeof target[key]==='function'){return async(...payload)=>{await this.onRequest();try{const responseData=await target[key](...payload);await this.onResponse();return responseData}catch(error){throw await this.onError(error);}}}else if(typeof target[key]==='object'){return this.proxyService(target[key])}}else{throw`Incorrect field type:${key}`}},};return new Proxy(apiService,proxyHandler)}async onRequest(){return await Promise.all(ApiManager.interceptors.request)}async onResponse(){return await Promise.all(ApiManager.interceptors.response)}async onError(error){await Promise.all(ApiManager.interceptors.error);return error}logout(){axios.defaults.headers.Authorization=''}}\",\"instance\":\"import axios from'axios'\\n\\n;const getAccessToken=()=>{return localStorage.getItem('EXAMPLE_NAME')};const accessToken=getAccessToken();export const instance=axios.create({baseURL:process.env.API_URL,headers:{Accept:'application/json',...(accessToken?{Authorization:`Bearer ${accessToken}`}:{}),},});\\n\"}"),u=["abstract","arguments","await","boolean","break","byte","case","catch","char","class","const","continue","debugger","default","delete","do","double","else","enum","eval","export","extends","false","final","finally","float","for","function","goto","if","implements","import","in","instanceof","int","interface","let","long","native","new","null","package","private","protected","public","return","short","static","super","switch","synchronized","this","throw","throws","transient","true","try","typeof","var","void","volatile","while","with","yield"],d=t(521),f=()=>d.createInterface({input:process.stdin,output:process.stdout}),y=async e=>{const n=f();return await new Promise((t=>n.question(e,(e=>{t(e),n.close()}))))};(async()=>{const e=process.argv.find((e=>/^--outdir/.test(e)))?.split("=")[1],n=await(async()=>{const e=f(),n=await new Promise((n=>e.question("Put your postman documentation link: ",(t=>{n(t),e.close()}))));return`/api/collections/${new URL(n).pathname.split("/").slice(-2).join("/")}?segregateAuth=true&versionTag=latest`})().catch((()=>null)),t=e??await y("Choose a destination directory (default: ./api): ").then((e=>e||"./api")).catch((()=>"./api"));if(!n)throw new Error("Incorrect URL");const i={hostname:"documenter.gw.postman.com",port:443,path:n,method:"GET"};function s(e){if(e.item)return e.item.reduce(((e,n)=>{var t;return e[(e=>[/\//g,/\\/g,/\[/g,/\]/g].reduce(((e,n)=>e.replace(n,"")),e))((t=(e=>{const n={Ё:"YO",Й:"I",Ц:"TS",У:"U",К:"K",Е:"E",Н:"N",Г:"G",Ш:"SH",Щ:"SCH",З:"Z",Х:"H",Ъ:"",ё:"yo",й:"i",ц:"ts",у:"u",к:"k",е:"e",н:"n",г:"g",ш:"sh",щ:"sch",з:"z",х:"h",ъ:"",Ф:"F",Ы:"I",В:"V",А:"a",П:"P",Р:"R",О:"O",Л:"L",Д:"D",Ж:"ZH",Э:"E",ф:"f",ы:"i",в:"v",а:"a",п:"p",р:"r",о:"o",л:"l",д:"d",ж:"zh",э:"e",Я:"Ya",Ч:"CH",С:"S",М:"M",И:"I",Т:"T",Ь:"",Б:"B",Ю:"YU",я:"ya",ч:"ch",с:"s",м:"m",и:"i",т:"t",ь:"",б:"b",ю:"yu"};return e.split("").map((e=>void 0===n[e]?e:n[e])).join("")})(n.name),t.split(" ").map(((e,n)=>e.charAt(0)[0===n?"toLowerCase":"toUpperCase"]()+e.slice(1))).join("")))]=s(n),e}),{});if(e.request){const{method:n,urlObject:t,body:r}=e.request;if(n&&t&&t.path&&t.path.length){const e=n.toLowerCase(),i=`const endpoint = '${t.path.join("/")}'; const response = await axios.${e}(\`\${apiPath}/\${endpoint}\`, {{body}}); return response.data;`;let o=`{fnName}: async () => {${i.replace("{body}","")}}\n`;if(r?.formdata){const e=[...r.formdata].sort(((e,n)=>Number(/required/.test(n.description))-Number(/required/.test(e.description)))),n=[],t=/\[(.*)\]/g;let s="",a="",c="";for(let r=0;r<e.length;r++){let{key:i,description:o}=e[r],l=!1;if(n.some((e=>e.includes(i))))return;if(t.test(i)){if(i=i.replace(t,""),n.includes(i))continue;n.push(i),o=(/required/.test(o)?"required":"")+" in:"}u.includes(i)&&(l=!0,i=`_${i}`),a+=`${l?`${i.replace(/^_/,"")} : ${i}`:i},`,c+=`${i} ${/required/.test(o)?"":" = undefined"},`,/\W(int|float)\W/.test(o)?s+=`\n* @param {number} ${i}`:/\Wstring\W/.test(o)?s+=`\n* @param {string} ${i}`:/\Win:\W/.test(o)?s+=`\n* @param {any[]} ${i}`:s+=`\n* @param {any} ${i}`,0===r&&(s=s.replace(/\n/,""))}o=`/**\n${s}\n*/\n '{fnName}': async (${c}) => {${i.replace("{body}",a)}}\n`}else if(t.query&&t.query.length){const e=t.query;let n="",r="",s="";for(let t=0;t<e.length;t++){let{key:i}=e[t],o=!1;u.includes(i)&&(o=!0,i=`_${i}`),n+=`\n* @param {any} ${i}`,r+=`${o?`${i.replace(/^_/,"")} : ${i}`:i},`,s+=`${i} = undefined,`,0===t&&(n=n.replace(/\n/,""))}o=`/**\n${n}\n*/\n '{fnName}': async (${s}) => {${i.replace("{body}",`params: {${r}}`)}}\n`}return o}}}async function c(e){const n=s(e);if(a().readdirSync(__dirname).find((e=>e===t.replace(/^\.\//,"")))){const n=await y(`WARNING: ${t} directory will be removed. Are you sure you want to continue? (y/n): `);if("y"!==n&&"yes"!==n){if("n"===n||"no"===n)throw new Error("Canceled");return c(e)}a().rmSync(l().join(__dirname,t),{recursive:!0})}return a().mkdirSync(l().join(__dirname,t)),a().readdirSync(l().join(__dirname,t)).find((e=>"services"===e))||a().mkdirSync(l().join(__dirname,`${t}/services`)),function(e,n=__dirname){const t=JSON.parse(JSON.stringify(e)),r=(e,n,t)=>{let i="";"object"==typeof n?i=Object.entries(n).reduce(((e,[n,i])=>{if("string"==typeof i)e+=i.replace("{fnName}",n)+",\n";else if("object"==typeof i){const e=l().join(t,n);a().mkdirSync(e),r(n,i,e)}return e}),""):"string"==typeof n&&(i=n),a().writeFileSync(`${t}/index.js`,((e,n)=>`/**{importsRow}*/\n\n export const ${e} = (apiPath = '') => ({/**{servicesRow}*/\n\n${n}\n});\n`)(e,i))};Object.entries(t).forEach((([e,i])=>{const o=l().join(n,e);a().mkdirSync(o),"object"==typeof i&&(r(e,i,o),delete t[e])}));const i=Object.entries(t);i.length&&(i.forEach((([e])=>{a().rmdirSync(l().join(n,e))})),r("rootRequests",{rootRequests:{...t}},n))}(n,l().join(__dirname,`${t}/services`)),n}function d(e,n=__dirname){return e.reduce(((e,t)=>{if(t.isDirectory()){const r=l().join(n,t.name),i=function(e){const n=a().readdirSync(e,{withFileTypes:!0});return 1===n.length&&n[0].isFile()}(r);return{...e,[t.name]:{containSubServices:!i,...i?{}:d(a().readdirSync(r,{withFileTypes:!0}),r)}}}return e}),{})}function m(e){return Object.entries(e).reduce(((e,[n,t])=>t.containSubServices?{...e,[n]:{items:Object.entries(t).filter((([e])=>"containSubServices"!==e)).map((([e,n])=>n.containSubServices?m({[e]:n}):{[e]:null}))}}:e),{})}function h(e,n=__dirname){Object.entries(e).forEach((([e,t])=>{const r=l().join(n,e),i=l().join(r,"index.js"),o=a().readFileSync(i,{encoding:"utf8"});let s="import { instance as axios } from '@/api/instance';\n\n",c="";for(let e=0;e<t.items.length;e++){const n=t.items[e],[i]=Object.entries(n),[o,a]=i,l=`${o}Service`;s+=`import {${o} as ${l}} from './${o}';`,c+=`${o}: ${l}(),`,a&&h(n,r)}const p=o.replace("/**{importsRow}*/",s).replace("/**{servicesRow}*/",c);a().writeFileSync(i,p,{encoding:"utf8"})}))}function g(e,n=__dirname){return[...e.filter((e=>e.isFile())).map((e=>l().join(n,e.name))),...e.filter((e=>e.isDirectory())).flatMap((e=>g(a().readdirSync(l().join(n,e.name),{withFileTypes:!0}),l().join(n,e.name))))]}o().request(i,(e=>{console.log("Fetching data from server...");let n="";e.on("data",(e=>{n+=e})),e.on("end",(async()=>{console.log("Data loaded!");const e=JSON.parse(n);console.log("Handling data...");try{await c(e),function(){const e=a().readdirSync(l().join(__dirname,`${t}/services`)).filter((e=>!/\.(js)$/.test(e)));!function(e){let n="",r="";for(let t=0;t<e.length;t++){const i=e[t];n+=`import {${i}} from './${i}';`,r+=`${i},`}const i=`${n}\n\nexport {${r}};\n`;a().writeFileSync(l().join(__dirname,`${t}/services/index.js`),i)}(e);let n="",r="";for(let t=0;t<e.length;t++){const i=e[t],o=`#${i}Service`;n+=`${o} = this.proxyService(services.${i}());`,r+=`/**\n* @returns {ReturnType<services.${i}>}\n*/\nget ${i} () { return this.${o} }`}Object.entries(p).forEach((([e,i])=>{"ApiManager"===e&&(i=(i=i.replace("{servicesFields}",n)).replace("{servicesGetters}",r)),a().writeFileSync(l().join(__dirname,`${t}/${e}.js`),i)}))}(),function(){const e=l().join(__dirname,`${t}/services`);h(m(d(a().readdirSync(e,{withFileTypes:!0}),e)),e),g(a().readdirSync(e,{withFileTypes:!0}),e).forEach((e=>{const n=a().readFileSync(e,{encoding:"utf8"}).replace("/**{importsRow}*/","import { instance as axios } from '@/api/instance';\n\n").replace("/**{servicesRow}*/","");a().writeFileSync(e,n,{encoding:"utf8"})}))}(),console.log("API template generated!"),console.log("Formatting..."),(0,r.exec)('npx prettier --write "./**/api/**/*.js"'),console.log("Done!")}catch(e){console.error(e)}}))})).end()})()},521:e=>{e.exports=require("readline")}},n={};function t(r){var i=n[r];if(void 0!==i)return i.exports;var o=n[r]={exports:{}};return e[r](o,o.exports,t),o.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t(855)})();